# string 串


## 数据结构里的串是什么东西？-就是字符串啦
http://www.nowamagic.net/librarys/veda/detail/2366

早先的计算机在被发明时，主要作用是做一些科学和工程的计算工作，也就是现在我们理解的计算器，只不过它比小小计算器功能更强大、速度更快一些。后来发现，在计算机上作非数值处理的工作越来越多，使得我们不得不需要引入对字符的处理。于是就有了字符串的概念。

比如我们现在常用的搜索引擎，当我们在文本框中输入“简明 现代"时，它已经把我们想要的“简明现代魔法”列在下面了（联想词）。显然这里网站作了一个字符串査找匹配的工作：

图1

今天我们就是来研究“串”这样的数据结构。先来看定义。

**串（string）是由零个或多个宇符组成的有限序列，又名叫字符串。**

一般记为s = "a,a2……an" (n>0)，其中，s是串的名称，用双引号（有些书中也用单引号）括起来的字符序列是串的值，注意单引号不属于串的内容。ai(1<= i<= n)可以是字母、数字或其他字符，i就是该字符在串中的位置。串中的字符数目n称为串的长度，定义中谈到“有限”是指长度n是一个有限的数值。零个字符的串称为空串（null string），它的长度为零，可以直接用两双引号一表示，也可以用希腊Φ字母来表示。所谓的序列，说明串的相邻字符之间具有前驱和后继的关系。


**一些特别的字符串**

还有一些概念需要解释。

* 空格串，是只包含空格的串。注意它与空串的区别，空格串是有内容有长度的，而且可以不止一个空格。

* 子串与主串，串中任意个数的连续字符组成的子序列称为该串的子串，相应地，包含子串的串称为主串。
子串在主串中的位置就是子串的第一个字符在主串中的序号。

比如在英语单词中，即使是friend也有个end，即使是believe也有个lie。
这里的"end", "lie"其实可以认为是"friend"、"believe"这些单词字符串的子串。

比起前面说到的链表，串简单吧？先难后易，是一种很好的学习方法。


## 如何比较串的大小-其实就是比较串的内部编码
http://www.nowamagic.net/librarys/veda/detail/2402

两个数字，很容易比较大小。2比1大，这完全正确，可是两个字符串如何比较呢？

比如"silty”、“stupid”这样的同样表达“愚蠢的”的单词字符串，它们在计算机中的大小其实取决于它们挨个字母的前后顺序。它们的第一个字母都是 s,我们认为不存在大小差异，而第二个字母，由于“i”字母比“t”字母要靠前，所以“i” < “t”，于是我们说 “silly” < “stupid”。

事实上，串的比较是通过组成串的字符之间的编码来进行的，而字符的编码指的是字符在对应字符集中的序号。

**关于编码**

计算机中的常用字符是使用标准的ASCII编码，更准确一点，由7位二进制数表示一个字符，总共可以表示128个字符。

后来随着一些特殊符号的出现，128个不够用，于是扩展ASCII码由8位二进制数表示一个字符，总共可以表示256个字符，这已经足够满足以英语为主的语言和特殊符号进行输入、存储、输出等操作的字符需要了。

可是，单我们国家就有除汉族外的满、回、藏、蒙古、维吾尔等多个少数民族文字，换作全世界估计要有成百上千种语言与文字，显然这256个字符是不够的，因此后来就有了 Unicode 编码，比较常用的是由16位的二进制数表示一个字符，这样总共就可以表示216个字符，约是65万多个字符，足够表示世界上所有语言的所有字符了。当然，为了和ASCII码兼容，Unicode的前256个字符与ASCII码完全相同。


所以如果我们要在C语言中比较两个串是否相等，必须是它们串的长度以及它们各个对应位置的字符都相等时，才算是相等。

**串的比较**

即给定两个串：s="a1a2……an"，t="b1b2……bm"，当且仅当 n=m，且 a1=b1, a2=b2, ……, an=bm 时，我们认为 s=t。

那么对于两个串不相等时，如何判定它们的大小呢？

给定两个串：s="a1a2……an"，t="b1b2……bm"。当满足以下条件之一时，s < t。

1. n < m, 且 ai=bi( i = 1, 2, ……, n)。

比如 s = "hap", t = "happy", 就有 s < t，因为 t 比 s 多两个字符。

2. 存在某个k < min(m, n)，使得ai=bi (i=l, 2, ……, k—1), ak < bk。

例如当s= “happen”，t= “happy”，因为两串的前4个字母均相同，而两串第5个字母（k值），字母e的ASCII码是101,而字母y的ASCH码是121，显然e < y，


有同学如果对这样的数学定义很不爽的话，那我再说一个字符串比较的应用。我们的英语词典，通常都是上万个单词的有序排列。就大小而言，前面的单词比 后面的要小。你在査找单词的过程，其实就是在比较字符串大小的过程。


嗯？有同学说，从不査纸质词典，都是用电子词典。电子词典査找单词实现的原理，其实就是字符串这种数据结构的典型应用，随着我们之后的讲解，大家就会明白。


## 串的抽象数据类型ADT-定义串的一些操作
http://www.nowamagic.net/librarys/veda/detail/2403

串的逻辑结构和线性表很相似，不同之处在于串针对的是字符集，也就是串中的元素都是字符，哪怕串中的字符是“123”这样的数字组成，或者“2010-10-1CT这 样的日期组成，它们都只能理解为长度为3和长度为10的字符串，每个元素都是字符而已。

因此，对于串的基本操作与线性表是有很大差别的。线性表更关注的是单个元素的操作，比如査找一个元素，插入或删除一个元素，但串中更多的是査找子串位置、得到指定位置子串、替换子串等操作。

以下5个操作称为最小操作子集：

* 串赋值StrAssign
* 串比较StrCompare
* 求串长StrLength
* 串联接Concat
* 求子串SubString

## 串的顺序存储结构-串在内存中如何存储？
http://www.nowamagic.net/librarys/veda/detail/2405

串的顺序存储结构是用一组地址连续的存储单元来存储串中的字符序列的。按照预定义的大小，为每个定义的串变量分配一个固定长度的存储区。一般是用定长数组来定义。

既然是定长数组，就存在一个预定义的最大串长度，一般可以将实际的串长度值保存在数组的0下标位置，有的书中也会定义存储在数组的最后一个下标位置。

但也有些编程语言不想这么干，觉得存个数字占个空间麻烦。它规定在串值后面加一个不计入串长度的结束标记字符，比如“\o”来表示串值的终结，这个时候，你要想知道此时的串长度，就需要遍历计算一下才知道了，其实这还是需要占用一个空间。【C语言-C++语言】

图1

刚才讲的串的顺序存储方式其实是有问题的，因为字符串的操作，比如两串的连接Concat、新串的插入Strlnsert、以及字符串的替换Replace，都有可能使得串序列的长度超过了数组的长度MaxSize。

也就是说，串的顺序存储结构的缺点是字符串的截断，截断就是超过预定义长度的串值被舍去。

于是对于串的顺序存储，有一些变化，串值的存储空间可在程序执行过程中动态分配而得。比如在计算机中存在一个自由存储区，叫做“堆”。这个堆可由C语言的动态分配函数malloc()和free()来管理。

接下来我们试着按照串ADT定义的操作，来实现串这个数据结构。
